<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <title>Mini Metro (Web) â€” Infinite Mode</title>
    <style>
      html, body { height: 100%; margin: 0; padding: 0; background: #111; color: #eee; touch-action: none; -webkit-user-select: none; user-select: none; -webkit-touch-callout: none; overflow: hidden; }
      #app { height: 100%; position: relative; }
      canvas { display: block; width: 100%; height: 100%; touch-action: none; -webkit-user-select: none; user-select: none; -webkit-touch-callout: none; -webkit-tap-highlight-color: transparent; }
      .overlay { position: fixed; left: 0; top: 0; padding: 8px 10px; font: 12px/1.4 system-ui, -apple-system, Segoe UI, Roboto; opacity: 0.75; z-index: 100; }
    </style>
  </head>
  <body>
    <div id="app">
      <canvas id="game"></canvas>
      <div class="overlay" id="hud">Loadingâ€¦</div>
      <div class="overlay" style="right: 0; left: auto; text-align: right">
        <div style="margin-bottom:6px">
          <button id="toggle-auto" style="font-size:12px">Auto Spawn: Off</button>
          <button id="spawn-one" style="font-size:12px">+ Station</button>
          <button id="spawn-on-connect" style="font-size:12px">Spawn on Connect: Off</button>
        </div>
        <div style="margin-bottom:6px">
          <button id="toggle-infinite-mode" style="font-size:12px; background-color:#4CAF50; color:white; border:none; padding:4px 8px; border-radius:4px; cursor:pointer;">ğŸ’° æ— é™æ¨¡å¼: Off</button>
        </div>
        <div style="margin-bottom:6px">
          <button id="toggle-delete-mode" style="font-size:12px; background-color:#ff4757; color:white; border:none; padding:4px 8px; border-radius:4px;">åˆ é™¤çº¿è·¯æ®µ: Off</button>
        </div>

        <!-- è´¢åŠ¡é¢æ¿ -->
        <div style="max-width: 220px; text-align:left; background: rgba(0,100,0,0.2); padding:6px; border-radius:6px; margin-bottom:6px; border: 1px solid rgba(0,255,0,0.3);">
          <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:4px">
            <strong style="font-size:12px; color:#00ff88;">ğŸ’° è´¢åŠ¡çŠ¶å†µ</strong>
          </div>
          <div style="font-size:11px; color:#fff;">
            <div>ä½™é¢: $<span id="money-balance">500</span></div>
            <div>æ€»æ”¶å…¥: $<span id="total-income">0</span></div>
            <div>æ€»æ”¯å‡º: $<span id="total-expense">0</span></div>
          </div>
        </div>
        <div style="margin-bottom:6px">
          <label for="passenger-rate" style="font-size:12px">æ¯ç§’ä¹˜å®¢æ•°: </label>
          <button id="passenger-rate-decrease" style="font-size:12px; width:20px; height:20px; padding:0; margin:0 2px;">â–</button>
          <input type="range" id="passenger-rate" min="1" max="10" step="1" value="1" style="width: 80px;">
          <button id="passenger-rate-increase" style="font-size:12px; width:20px; height:20px; padding:0; margin:0 2px;">â•</button>
          <span id="passenger-rate-value" style="font-size:12px">1</span>
        </div>
        <div style="margin-bottom:6px">
          <button id="btn-add-train" style="font-size:12px" title="ä¸ºå½“å‰çº¿è·¯æ·»åŠ åˆ—è½¦">+ åˆ—è½¦ ($<span id="train-cost">100</span>)</button>
          <button id="btn-capacity" style="font-size:12px" title="å¢åŠ å½“å‰çº¿è·¯æ‰€æœ‰åˆ—è½¦çš„è½½å®¢é‡">+ è½½å®¢é‡ ($<span id="capacity-cost">20</span>)</button>
        </div>
        <div id="lines-panel" style="max-width: 220px; text-align:left; background: rgba(0,0,0,0.2); padding:6px; border-radius:6px">
          <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:4px">
            <strong style="font-size:12px">çº¿è·¯ç®¡ç†</strong>
          </div>
          <div id="lines-list" style="font-size:12px"></div>
        </div>
        <div style="max-width: 220px; text-align:left; background: rgba(0,0,0,0.2); padding:6px; border-radius:6px; margin-top:6px">
          <div style="font-size:11px; opacity:0.8">
            <strong>æ™ºèƒ½å¸é™„åŠŸèƒ½ï¼š</strong><br>
            â€¢ æ‹–æ‹½çº¿è·¯å¯å°†å…¶å»¶ä¼¸åˆ°é™„è¿‘ç«™ç‚¹<br>
            â€¢ ç»¿è‰²é«˜äº®è¡¨ç¤ºå¯å¸é™„çš„ç«™ç‚¹<br>
            â€¢ é‡Šæ”¾æ‹–æ‹½å³å¯è‡ªåŠ¨è¿æ¥
          </div>
        </div>
      </div>
      <div id="link-chooser" style="position:absolute; background:rgba(0,0,0,0.9); color:white; padding:12px; border-radius:8px; z-index:1000; box-shadow:0 4px 12px rgba(0,0,0,0.3); border:1px solid rgba(255,255,255,0.2); display:none; min-width:200px;">
        <div id="link-chooser-text" style="margin-bottom:8px; font-size:14px">é€‰æ‹©æ“ä½œ</div>
        <div id="link-chooser-buttons" style="display:flex; flex-wrap:wrap; gap:8px"></div>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
