n d<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <title>Mini Metro (Web) — Infinite Mode</title>
    <style>
      html, body { height: 100%; margin: 0; background: #111; color: #eee; touch-action: none; -webkit-user-select: none; user-select: none; -webkit-touch-callout: none; }
      #app { height: 100%; }
      canvas { display: block; width: 100%; height: 100%; touch-action: none; -webkit-user-select: none; user-select: none; -webkit-touch-callout: none; -webkit-tap-highlight-color: transparent; }
      .overlay { position: fixed; left: 0; top: 0; padding: 8px 10px; font: 12px/1.4 system-ui, -apple-system, Segoe UI, Roboto; opacity: 0.75; }
    </style>
  </head>
  <body>
    <div id="app">
      <canvas id="game"></canvas>
      <div class="overlay" id="hud">Loading…</div>
      <div class="overlay" style="right: 0; left: auto; text-align: right">
        <div style="margin-bottom:6px">
          <button id="toggle-auto" style="font-size:12px">Auto Spawn: Off</button>
          <button id="spawn-one" style="font-size:12px">+ Station</button>
          <button id="spawn-on-connect" style="font-size:12px">Spawn on Connect: Off</button>
        </div>
        <div style="margin-bottom:6px">
          <label for="passenger-rate" style="font-size:12px">每秒乘客数: </label>
          <input type="range" id="passenger-rate" min="0.1" max="5" step="0.1" value="0.5" style="width: 100px;">
          <span id="passenger-rate-value" style="font-size:12px">0.5</span>
        </div>
        <div style="margin-bottom:6px">
          <button id="btn-add-train" style="font-size:12px" title="为当前线路添加列车">+ 列车</button>
          <button id="btn-capacity" style="font-size:12px" title="增加当前线路所有列车的载客量">+ 载客量</button>
        </div>
        <div id="lines-panel" style="max-width: 220px; text-align:left; background: rgba(0,0,0,0.2); padding:6px; border-radius:6px">
          <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:4px">
            <strong style="font-size:12px">线路管理</strong>
          </div>
          <div id="lines-list" style="font-size:12px"></div>
        </div>
      </div>
      <div id="link-chooser" class="overlay" style="left:50%; transform: translateX(-50%); bottom: 10px; top: auto; background: rgba(0,0,0,0.8); border-radius:8px; display:none; min-width: 260px;">
        <div id="link-chooser-text" style="margin-bottom:6px">选择操作</div>
        <div id="link-chooser-buttons" style="display:flex; flex-wrap:wrap; gap:6px"></div>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
